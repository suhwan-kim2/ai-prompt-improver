// utils/mentionExtractor.js - ì–¸ê¸‰ ì •ë³´ ì¶”ì¶œ ì‹œìŠ¤í…œ

class MentionExtractor {
  constructor() {
    // ðŸ” íŒ¨í„´ ë§¤ì¹­ ì‹œìŠ¤í…œ
    this.patterns = {
      ìƒ‰ìƒ: {
        keywords: ["ë¹¨ê°„", "íŒŒëž€", "ë…¸ëž€", "ê²€ì€", "í°", "íšŒìƒ‰", "ê°ˆìƒ‰", "ì´ˆë¡", "ë³´ë¼", "ë¶„í™", "ì£¼í™©"],
        regex: /(ë¹¨ê°„|ë¹¨ê°•|íŒŒëž€|íŒŒëž‘|ë…¸ëž€|ë…¸ëž‘|ê²€ì€|ê²€ì •|í°|í•˜ì–€|íšŒìƒ‰|ê°ˆìƒ‰|ì´ˆë¡|ë…¹ìƒ‰|ë³´ë¼|ë¶„í™|ì£¼í™©|ê¸ˆìƒ‰|ì€ìƒ‰)/gi
      },
      
      í¬ê¸°: {
        keywords: ["ìž‘ì€", "í°", "ì¤‘ê°„", "ì„¸ë¡œ", "ê°€ë¡œ", "ì •ì‚¬ê°í˜•"],
        regex: /(ìž‘ì€|í°|ì¤‘ê°„|ì„¸ë¡œ|ê°€ë¡œ|ì •ì‚¬ê°í˜•|(\d+)\s*(px|cm|mm))/gi
      },
      
      ìŠ¤íƒ€ì¼: {
        keywords: ["ì‚¬ì‹¤ì ", "3d", "ì• ë‹ˆë©”ì´ì…˜", "ë§Œí™”", "ì¼ëŸ¬ìŠ¤íŠ¸", "ìˆ˜ì±„í™”"],
        regex: /(ì‚¬ì‹¤ì |ì‹¤ì‚¬|3d|ì• ë‹ˆë©”ì´ì…˜|ë§Œí™”|ì¼ëŸ¬ìŠ¤íŠ¸|ìˆ˜ì±„í™”|ìœ í™”|ì¶”ìƒì )/gi
      },
      
      í•´ìƒë„: {
        keywords: ["4k", "hd", "ê³ í™”ì§ˆ", "ê³ í’ˆì§ˆ"],
        regex: /(4k|hd|fhd|uhd|8k|ê³ í™”ì§ˆ|ê³ í’ˆì§ˆ|(\d+)p)/gi
      },
      
      ì‹œê°„: {
        keywords: ["ì´ˆ", "ë¶„", "ì‹œê°„"],
        regex: /(\d+)\s*(ì´ˆ|ë¶„|ì‹œê°„)/g
      },
      
      ëª©ì : {
        keywords: ["ê´‘ê³ ", "êµìœ¡", "í™ë³´", "ê°œì¸", "ìƒì—…"],
        regex: /(ê´‘ê³ |êµìœ¡|í™ë³´|ê°œì¸|ìƒì—…|ë¹„ì¦ˆë‹ˆìŠ¤)/gi
      },
      
      ëŒ€ìƒ: {
        keywords: ["ì•„ì´", "ì–´ë¥¸", "í•™ìƒ", "ì „ë¬¸ê°€", "ì¼ë°˜ì¸"],
        regex: /(ì•„ì´|ì–´ë¥¸|í•™ìƒ|ì „ë¬¸ê°€|ì¼ë°˜ì¸|ê³ ê°|ì‚¬ìš©ìž)/gi
      },
      
      ë¶„ìœ„ê¸°: {
        keywords: ["ë°ì€", "ì–´ë‘ìš´", "ë”°ëœ»í•œ", "ì°¨ê°€ìš´", "ë¶€ë“œëŸ¬ìš´"],
        regex: /(ë°ì€|ì–´ë‘ìš´|ë”°ëœ»í•œ|ì°¨ê°€ìš´|ë¶€ë“œëŸ¬ìš´|ê°•ë ¬í•œ|ì°¨ë¶„í•œ)/gi
      },
      
      í’ˆì§ˆ: {
        keywords: ["ê³ í’ˆì§ˆ", "ì „ë¬¸ì ", "ìµœê³ ê¸‰"],
        regex: /(ê³ í’ˆì§ˆ|ê³ í™”ì§ˆ|ì „ë¬¸ì |ìµœê³ ê¸‰|í”„ë¦¬ë¯¸ì—„)/gi
      },
      
      ê¸°ìˆ : {
        keywords: ["html", "css", "javascript", "react", "python"],
        regex: /(html|css|javascript|react|vue|python|java|node)/gi
      }
    };
  }
  
  // ðŸ” ë©”ì¸ ì¶”ì¶œ í•¨ìˆ˜
  extract(text) {
    try {
      console.log('ðŸ” ì–¸ê¸‰ ì •ë³´ ì¶”ì¶œ ì‹œìž‘');
      
      if (Array.isArray(text)) {
        text = text.join(' ');
      }
      
      const extracted = {};
      
      Object.entries(this.patterns).forEach(([category, pattern]) => {
        extracted[category] = this
